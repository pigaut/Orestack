
--- # ===== Stage 1 =====
type: depleted
block: iron_block
growth: 40  # Time in ticks to grow to the next stage, or time format: (1 hour(s) 10 m|min(s)|minute(s) 100 s|sec(s)|second(s))

hologram:
  type: animated
  offset: { x: 0, y: 1, z: 0 }
  update: 10  # 40 ticks of growth divided into 4 frames (40 / 4 = 10)
  frames:
    - '&a[]&7[][][]'
    - '&a[][]&7[][]'
    - '&a[][][]&7[]'
    - '&a[][][][]'

on-click: []

on-break:
  do: sendTitle <&7&lDepleted> <subtitle=&7{generator_timer_seconds}> fadeIn=5 stay=15 fadeOut=10

--- # ===== Stage 2 =====
type: growing
block: gold_block
growth: 3s
chance: 0.8  # 80% chance to spawn, otherwise skips to the next stage

hologram:
  - type: animated
    update: 3
    offset: { x: 0, y: 1, z: 0 }
    frames:
      - "&6&lG"
      - "&6&lGo"
      - "&6&lGol"
      - "&6&lGold"
      - "&6&lGold!"
      - "&6&lGold!!"
      - "&6&lGold!!!"
      - "&7"
      - "&6&lGold!!!"
      - "&7"
      - "&6&lGold!!!"
      - "&6&lGold!!"
      - "&6&lGold!"
      - "&6&lGold"
      - "&6&lGol"
      - "&6&lGo"
      - "&6&lG"
  - type: static
    text: "&eright-click"
    offset: { x: 0, y: 0.75, z: 0 }

on-click:
  if-not:
    - clickTypeEquals left_click
    - isSneaking
  do:
    - cancelEvent
    - chatMessage <This is a gold block. Maybe you should try to mine it.>

on-break:
  - if-not: hasPermission orestack.generator.harvest
    do:
      - chatMessage <&4You have no permission to mine this block>
      - cancelEvent
      - return

  - if-not: toolTypeEquals IRON_PICKAXE, GOLD_PICKAXE, DIAMOND_PICKAXE, NETHERITE_PICKAXE
    do:
      - chatMessage <&4You need at least an iron pickaxe to mine this block>
      - cancelEvent
      - return

  - chance: 0.5
    do:
      - spawnParticleAtBlock explosion
      - dropItemAtBlock gold_ingot
      - chatMessage <&aYou struck gold!>

--- # ===== Stage 3 =====
type: ripe
block: diamond_block
growth: 4s

hologram:
  type: static
  update: 3
  offset: { x: 0, y: 1, z: 0 }
  text: "&b&lDiamond [{stage_timer_seconds}s]"

on-break:
  - do:
      - giveItem diamond
      - chatMessage <You have mined diamond>

  - if: placeholderEquals example id={generator} ignoreCase=false
    do: playSoundAtBlock tin

# Economy Example (Requires Vault and an economy plugin)
#
#  - if: hasMoney 10000
#    do:
#      - chatMessage <Wow, you're rich! Here's some more.>
#      - giveMoney 10000
#      - chatMessage <Just kidding give it back lol>
#      - takeMoney 10000

--- # ===== Stage 4 =====
type: regrown
block: emerald_block
hologram:
  - type: static
    text: "&2&lEmerald"
    offset: { y: 1 }
  - type: static
    text: "&a[Replenished]"
    offset: { y: 0.75 }

on-break:
  - if: hasPermission orestack.generator.harvest
    do:
      - giveItem emerald
      - spawnParticleAtBlock flame_ring
      - dropExpAtBlock 10-100 orbs=5-20
      - sendMessage hologram

    else:
      - cancelEvent
      - chatMessage <&4You don't have permission to mine this block!>
      - playSound tin x=-454 y=70 z=180

